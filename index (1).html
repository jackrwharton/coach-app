<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="COACH">
    <meta name="theme-color" content="#1f2937">
    <link rel="manifest" href="manifest.json">
    <title>COACH - Youth Sports Coaching App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', sans-serif;
            background: #f5f7fa;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            background: white;
            padding: 25px 35px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 25px;
        }
        
        h1 {
            color: #1a1a1a;
            font-size: 2em;
            font-weight: 700;
            letter-spacing: -0.5px;
            margin-bottom: 0;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.1em;
        }
        
        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 25px;
            flex-wrap: nowrap;
            overflow-x: auto;
        }
        
        .team-selector {
            background: white;
            border: 2px solid #e5e7eb;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 600;
            transition: all 0.2s;
            white-space: nowrap;
        }
        
        .team-selector:hover {
            border-color: #667eea;
            background: #f9fafb;
        }
        
        .team-selector.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .tab {
            background: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.2s;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            white-space: nowrap;
            color: #4b5563;
        }
        
        .tab:hover {
            background: #f9fafb;
            color: #1f2937;
        }
        
        .tab.active {
            background: #1f2937;
            color: white;
        }
        
        .tab-content {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .tab-content.active {
            display: block;
        }
        
        .card {
            background: #f9fafb;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 3px solid #667eea;
        }
        
        .drill-card {
            background: #f9fafb;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid #e5e7eb;
        }
        
        .drill-card:hover {
            border-color: #667eea;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.15);
        }
        
        .drill-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .drill-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        
        .badge {
            background: #667eea;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
        }
        
        .badge.age {
            background: #48bb78;
        }
        
        .badge.time {
            background: #ed8936;
        }
        
        .drill-description {
            color: #555;
            line-height: 1.6;
            margin-top: 10px;
        }
        
        .player-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .player-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .player-name {
            font-size: 1.3em;
            font-weight: 700;
            margin-bottom: 15px;
        }
        
        .stat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }
        
        .star-rating {
            display: flex;
            gap: 3px;
        }
        
        .star {
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.2s;
        }
        
        .star:hover {
            transform: scale(1.2);
        }
        
        .star.filled {
            color: #fbbf24;
        }
        
        .star.empty {
            color: rgba(255,255,255,0.3);
        }
        
        .onboarding-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .onboarding-overlay.active {
            display: flex;
        }
        
        .onboarding-box {
            background: white;
            padding: 40px;
            border-radius: 16px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .onboarding-box h2 {
            color: #1f2937;
            margin-bottom: 10px;
            font-size: 1.8em;
        }
        
        .onboarding-box p {
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .team-setup-card {
            background: #f9fafb;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid #e5e7eb;
        }
        
        .team-setup-card h3 {
            color: #1f2937;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .remove-team-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 600;
        }
        
        .add-team-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            width: 100%;
            margin-bottom: 20px;
        }
        
        .finish-setup-btn {
            background: #48bb78;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 700;
            width: 100%;
        }
        
        .finish-setup-btn:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
        }
        
        .btn {
            background: #1f2937;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.2s;
            margin-right: 8px;
            margin-bottom: 8px;
        }
        
        .btn:hover {
            background: #111827;
        }
        
        .btn-secondary {
            background: #667eea;
        }
        
        .btn-secondary:hover {
            background: #5568d3;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1em;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .close {
            float: right;
            font-size: 2em;
            cursor: pointer;
            color: #999;
        }
        
        .progress-bar {
            background: #e2e8f0;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .progress-fill {
            background: #48bb78;
            height: 100%;
            transition: width 0.3s;
        }
        
        .attendance-check {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .attendance-check input[type="checkbox"] {
            width: auto;
            margin: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>COACH</h1>
            <div style="margin-top: 20px; display: flex; gap: 15px; flex-wrap: wrap;" id="teamSelectorContainer">
                <!-- Teams will be dynamically inserted here -->
            </div>
        </header>
        
        <div class="tabs">
            <button class="tab active" onclick="switchTab('roster')">Roster</button>
            <button class="tab" onclick="switchTab('attendance')">Attendance</button>
            <button class="tab" onclick="switchTab('drills')">Practice Drills</button>
            <button class="tab" onclick="switchTab('practice')">Plan Practice</button>
            <button class="tab" onclick="switchTab('game-plan')">Plan Game</button>
            <button class="tab" onclick="switchTab('game-breakdown')">Game Breakdown</button>
        </div>
        
        <!-- Drills Tab -->
        <div id="drills" class="tab-content">
            <h2 style="margin-bottom: 20px;"><span id="drillsTeamName"></span> Practice Drills Library</h2>
            <div id="drillsList"></div>
        </div>
        
        <!-- Roster Tab -->
        <div id="roster" class="tab-content active">
            <h2 style="margin-bottom: 20px;"><span id="rosterTeamName"></span> Team Roster & Progress</h2>
            <button class="btn" onclick="showAddPlayer()">+ Add Player</button>
            <div id="playersList" class="player-grid"></div>
        </div>
        
        <!-- Attendance Tab -->
        <div id="attendance" class="tab-content">
            <h2 style="margin-bottom: 20px;"><span id="attendanceTeamName"></span> Practice Attendance</h2>
            <button class="btn" onclick="showAttendance()">Record Today's Attendance</button>
            <div id="attendanceHistory"></div>
            
            <h2 style="margin-top: 40px; margin-bottom: 20px;">Practice & Game Schedule</h2>
            <button class="btn btn-secondary" onclick="showAddScheduleEvent()">+ Add to Schedule</button>
            <div id="scheduleList"></div>
        </div>
        
        <!-- Practice Planning Tab -->
        <div id="practice" class="tab-content">
            <h2 style="margin-bottom: 20px;"><span id="practiceTeamName"></span> Practice Plan</h2>
            <p style="margin-bottom: 20px; color: #666;">Click drills from the library to add them to your practice plan</p>
            <div id="practicePlan"></div>
            <button class="btn btn-secondary" onclick="savePractice()">Save Practice Plan</button>
            <button class="btn" onclick="clearPractice()">Clear Plan</button>
        </div>
        
        <!-- Game Plan Tab -->
        <div id="game-plan" class="tab-content">
            <h2 style="margin-bottom: 20px;"><span id="gamePlanTeamName"></span> Game Plan</h2>
            <button class="btn" onclick="showCreateGamePlan()">+ Create Game Plan</button>
            <div id="gamePlansList"></div>
        </div>
        
        <!-- Game Breakdown Tab -->
        <div id="game-breakdown" class="tab-content">
            <h2 style="margin-bottom: 20px;"><span id="gameBreakdownTeamName"></span> Game Breakdown</h2>
            <button class="btn" onclick="showAddGameStats()">+ Add Game Stats</button>
            <div id="gameBreakdownList"></div>
            
            <h2 style="margin-top: 40px; margin-bottom: 20px;">Game Notes & Observations</h2>
            <button class="btn btn-secondary" onclick="showAddGameNote()">+ Add Game Note</button>
            <div id="gameNotesList"></div>
        </div>
        
        <!-- Add Player Modal -->
        <div id="addPlayerModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal('addPlayerModal')">&times;</span>
                <h2>Add New Player</h2>
                <input type="text" id="playerName" placeholder="Player Name">
                <input type="number" id="playerAge" placeholder="Age" min="3" max="10">
                <button class="btn" onclick="addPlayer()">Add Player</button>
            </div>
        </div>
        
        <!-- Attendance Modal -->
        <div id="attendanceModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal('attendanceModal')">&times;</span>
                <h2>Record Attendance</h2>
                <div id="attendanceList"></div>
                <button class="btn" onclick="saveAttendance()">Save Attendance</button>
            </div>
        </div>
        
        <!-- Game Plan Modal -->
        <div id="gamePlanModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal('gamePlanModal')">&times;</span>
                <h2>Create Game Plan</h2>
                <input type="text" id="gamePlanOpponent" placeholder="Opponent Team Name">
                <input type="date" id="gamePlanDate">
                <textarea id="gamePlanStrategy" placeholder="Game strategy and goals..." rows="4"></textarea>
                <textarea id="gamePlanLineup" placeholder="Starting lineup and positions..." rows="4"></textarea>
                <button class="btn" onclick="saveGamePlan()">Save Game Plan</button>
            </div>
        </div>
        
        <!-- Game Stats Modal -->
        <div id="gameStatsModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal('gameStatsModal')">&times;</span>
                <h2>Add Game Stats</h2>
                <input type="text" id="gameStatsOpponent" placeholder="Opponent Team Name">
                <input type="date" id="gameStatsDate">
                <div style="display: flex; gap: 10px;">
                    <input type="number" id="gameStatsOurScore" placeholder="Our Score" style="flex: 1;">
                    <input type="number" id="gameStatsTheirScore" placeholder="Their Score" style="flex: 1;">
                </div>
                <textarea id="gameStatsNotes" placeholder="Game highlights, player performances, what went well, areas to improve..." rows="5"></textarea>
                <button class="btn" onclick="saveGameStats()">Save Game Stats</button>
            </div>
        </div>
        
        <!-- Schedule Event Modal -->
        <div id="scheduleEventModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal('scheduleEventModal')">&times;</span>
                <h2>Add to Schedule</h2>
                <select id="scheduleEventType">
                    <option value="practice">Practice</option>
                    <option value="game">Game</option>
                </select>
                <input type="date" id="scheduleEventDate">
                <input type="time" id="scheduleEventTime">
                <input type="text" id="scheduleEventLocation" placeholder="Location">
                <input type="text" id="scheduleEventOpponent" placeholder="Opponent (for games only)" style="display: none;">
                <textarea id="scheduleEventNotes" placeholder="Notes (optional)..." rows="3"></textarea>
                <button class="btn" onclick="saveScheduleEvent()">Add to Schedule</button>
            </div>
        </div>
        
        <!-- Game Note Modal -->
        <div id="gameNoteModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal('gameNoteModal')">&times;</span>
                <h2>Add Game Note</h2>
                <input type="text" id="gameNoteTitle" placeholder="Game title or opponent">
                <input type="date" id="gameNoteDate">
                <textarea id="gameNoteContent" placeholder="Your observations, what worked well, what to improve, player highlights..." rows="6"></textarea>
                <button class="btn" onclick="saveGameNote()">Save Note</button>
            </div>
        </div>
    </div>
    
    <!-- Onboarding Overlay -->
    <div id="onboardingOverlay" class="onboarding-overlay">
        <div class="onboarding-box">
            <h2>Welcome to COACH!</h2>
            <p>Let's set up your teams. You can add as many as you need.</p>
            
            <div id="teamSetupContainer"></div>
            
            <button class="add-team-btn" onclick="addTeamSetup()">+ Add Another Team</button>
            <button class="finish-setup-btn" id="finishSetupBtn" onclick="finishOnboarding()">Let's Go!</button>
        </div>
    </div>
    
    <script>
        // Sample drills database
        const drills = [
            // T-Ball Drills
            {
                id: 1,
                title: "Hit the Tee",
                sport: "T-Ball",
                ageRange: "3-5",
                duration: "10-15 min",
                focus: "Batting Basics",
                description: "Each player gets turns hitting the ball off the tee. Focus on just making contact! Celebrate every hit, no matter how small.",
                fun: false
            },
            {
                id: 2,
                title: "Base Running Races",
                sport: "T-Ball",
                ageRange: "3-8",
                duration: "10 min",
                focus: "Running & Speed",
                description: "Race around the bases! Make it silly - run like a dinosaur, hop like a bunny, or waddle like a penguin. Kids love it!",
                fun: true
            },
            {
                id: 3,
                title: "Catch & Throw Partners",
                sport: "T-Ball",
                ageRange: "5-8",
                duration: "10-15 min",
                focus: "Throwing & Catching",
                description: "Pairs practice throwing and catching. Start very close, celebrate every catch! Gradually move apart as they improve.",
                fun: false
            },
            {
                id: 4,
                title: "Fly Ball Fun",
                sport: "T-Ball",
                ageRange: "5-10",
                duration: "10 min",
                focus: "Catching Fly Balls",
                description: "Toss soft balls in the air for kids to catch. Start easy, make it fun! High fives for every catch attempt.",
                fun: true
            },
            {
                id: 5,
                title: "Ground Ball Gobble",
                sport: "T-Ball",
                ageRange: "5-8",
                duration: "10-15 min",
                focus: "Fielding Ground Balls",
                description: "Roll balls for kids to field and throw back. Make silly sounds - pretend the ball is a hungry monster they need to catch!",
                fun: true
            },
            {
                id: 6,
                title: "Batting Practice Stations",
                sport: "T-Ball",
                ageRange: "5-10",
                duration: "15-20 min",
                focus: "Batting Skills",
                description: "Rotate through stations: tee hitting, soft toss, and wiffle ball. Keep everyone engaged with short turns.",
                fun: false
            },
            // Basketball Drills
            {
                id: 7,
                title: "Dribble Tag",
                sport: "Basketball",
                ageRange: "5-8",
                duration: "10 min",
                focus: "Dribbling & Control",
                description: "Play tag while everyone dribbles! If tagged, do 5 dribbles and you're back in. Great for ball control while having fun!",
                fun: true
            },
            {
                id: 8,
                title: "Shooting Stars",
                sport: "Basketball",
                ageRange: "5-10",
                duration: "10-15 min",
                focus: "Shooting Form",
                description: "Practice shooting from close range. Lower the hoop if needed! Celebrate good form, not just makes. Everyone's a star!",
                fun: false
            },
            {
                id: 9,
                title: "Dribble Relay Races",
                sport: "Basketball",
                ageRange: "5-8",
                duration: "10 min",
                focus: "Dribbling & Teamwork",
                description: "Teams race while dribbling around cones. Everyone cheers for their teammates! Switch up the dribbling style each round.",
                fun: true
            },
            {
                id: 10,
                title: "Pass & Move",
                sport: "Basketball",
                ageRange: "5-10",
                duration: "10-15 min",
                focus: "Passing & Movement",
                description: "Circle passing drill - pass and move to a new spot! Add fun rules like bounce pass only or overhead pass.",
                fun: false
            },
            {
                id: 11,
                title: "Layup Lines",
                sport: "Basketball",
                ageRange: "5-10",
                duration: "10-15 min",
                focus: "Layups",
                description: "Simple layup practice. Keep the line moving, keep it positive! Focus on form over makes at this age.",
                fun: false
            },
            {
                id: 12,
                title: "Knock Out",
                sport: "Basketball",
                ageRange: "5-10",
                duration: "10 min",
                focus: "Shooting & Fun",
                description: "Classic basketball game! Two balls, make your shot before the person behind you. Pure fun that builds shooting skills!",
                fun: true
            },
            // General Fun Drills
            {
                id: 13,
                title: "Red Light, Green Light",
                sport: "General",
                ageRange: "3-5",
                duration: "5-10 min",
                focus: "Listening & Control",
                description: "Classic game! Players run on 'green light' and freeze on 'red light'. Great for teaching body control and following directions.",
                fun: true
            },
            {
                id: 14,
                title: "Sharks and Minnows",
                sport: "General",
                ageRange: "3-8",
                duration: "10-15 min",
                focus: "Agility & Teamwork",
                description: "One player is the shark, others are minnows trying to cross without being tagged. Tagged players become sharks!",
                fun: true
            },
            {
                id: 15,
                title: "Musical Cones",
                sport: "General",
                ageRange: "3-8",
                duration: "10 min",
                focus: "Speed & Fun",
                description: "Like musical chairs but with cones! When music stops, find a cone to touch. Great warm-up that gets everyone laughing.",
                fun: true
            },
            {
                id: 16,
                title: "Freeze Dance",
                sport: "General",
                ageRange: "3-5",
                duration: "5-10 min",
                focus: "Coordination",
                description: "Dance when music plays, freeze when it stops! Add silly poses or ask them to freeze like their favorite animal.",
                fun: true
            },
            {
                id: 17,
                title: "Simon Says (Sports Edition)",
                sport: "General",
                ageRange: "3-8",
                duration: "10 min",
                focus: "Listening & Skills",
                description: "Classic Simon Says with sports moves - dribble, throw, catch, stretch. Sneaky way to practice without them realizing!",
                fun: true
            },
            {
                id: 18,
                title: "Relay Races",
                sport: "General",
                ageRange: "5-10",
                duration: "15 min",
                focus: "Speed & Teamwork",
                description: "Teams race with different challenges - run backwards, hop on one foot, crab walk. Everyone cheers for their team!",
                fun: true
            }
        ];
        
        // Dynamic team management
        let teams = JSON.parse(localStorage.getItem('teams')) || {};
        let currentTeam = localStorage.getItem('currentTeam') || null;
        let teamSetupCounter = 0;
        
        // Initialize data structures for all teams
        let players = JSON.parse(localStorage.getItem('players')) || {};
        let attendanceRecords = JSON.parse(localStorage.getItem('attendance')) || {};
        let currentPractice = JSON.parse(localStorage.getItem('currentPractice')) || {};
        let gamePlans = JSON.parse(localStorage.getItem('gamePlans')) || {};
        let gameStats = JSON.parse(localStorage.getItem('gameStats')) || {};
        let scheduleEvents = JSON.parse(localStorage.getItem('scheduleEvents')) || {};
        let gameNotes = JSON.parse(localStorage.getItem('gameNotes')) || {};
        
        // Check if this is first time user
        const isFirstTime = Object.keys(teams).length === 0;
        
        // Onboarding functions
        function showOnboarding() {
            document.getElementById('onboardingOverlay').classList.add('active');
            // Add first team setup by default
            addTeamSetup();
        }
        
        function addTeamSetup() {
            teamSetupCounter++;
            const container = document.getElementById('teamSetupContainer');
            const setupCard = document.createElement('div');
            setupCard.className = 'team-setup-card';
            setupCard.id = `team-setup-${teamSetupCounter}`;
            setupCard.innerHTML = `
                <h3>
                    Team ${teamSetupCounter}
                    ${teamSetupCounter > 1 ? '<button class="remove-team-btn" onclick="removeTeamSetup(' + teamSetupCounter + ')">Remove</button>' : ''}
                </h3>
                <input type="text" id="teamName-${teamSetupCounter}" placeholder="Team Name (example: Gators, Colts, Pacers)" style="margin-bottom: 15px;">
                <select id="teamSport-${teamSetupCounter}" style="margin-bottom: 15px;">
                    <option value="">Select Sport</option>
                    <option value="T-Ball">T-Ball</option>
                    <option value="Baseball">Baseball</option>
                    <option value="Basketball">Basketball</option>
                    <option value="Soccer">Soccer</option>
                    <option value="Football">Football</option>
                    <option value="Volleyball">Volleyball</option>
                    <option value="Other">Other</option>
                </select>
                <select id="teamAge-${teamSetupCounter}">
                    <option value="">Select Age Group</option>
                    <option value="U6">Under 6</option>
                    <option value="U8">Under 8</option>
                    <option value="U10">Under 10</option>
                    <option value="U12">Under 12</option>
                    <option value="U14">Under 14</option>
                    <option value="U16">Under 16</option>
                    <option value="U18">Under 18</option>
                </select>
            `;
            container.appendChild(setupCard);
            updateFinishButton();
        }
        
        function removeTeamSetup(id) {
            const card = document.getElementById(`team-setup-${id}`);
            if (card) {
                card.remove();
                updateFinishButton();
            }
        }
        
        function updateFinishButton() {
            const setupCards = document.querySelectorAll('.team-setup-card');
            const btn = document.getElementById('finishSetupBtn');
            btn.disabled = setupCards.length === 0;
        }
        
        function finishOnboarding() {
            const setupCards = document.querySelectorAll('.team-setup-card');
            const newTeams = {};
            let isValid = true;
            
            setupCards.forEach(card => {
                const id = card.id.split('-')[2];
                const name = document.getElementById(`teamName-${id}`).value.trim();
                const sport = document.getElementById(`teamSport-${id}`).value;
                const ageGroup = document.getElementById(`teamAge-${id}`).value;
                
                if (!name || !sport || !ageGroup) {
                    isValid = false;
                    return;
                }
                
                const teamId = name.toLowerCase().replace(/\s+/g, '-');
                newTeams[teamId] = {
                    name: name,
                    sport: sport,
                    ageGroup: ageGroup
                };
                
                // Initialize data structures for this team
                players[teamId] = [];
                attendanceRecords[teamId] = [];
                currentPractice[teamId] = [];
                gamePlans[teamId] = [];
                gameStats[teamId] = [];
                scheduleEvents[teamId] = [];
                gameNotes[teamId] = [];
            });
            
            if (!isValid) {
                alert('Please fill in all fields for each team!');
                return;
            }
            
            if (Object.keys(newTeams).length === 0) {
                alert('Please add at least one team!');
                return;
            }
            
            // Save teams
            teams = newTeams;
            currentTeam = Object.keys(teams)[0];
            
            localStorage.setItem('teams', JSON.stringify(teams));
            localStorage.setItem('currentTeam', currentTeam);
            localStorage.setItem('players', JSON.stringify(players));
            localStorage.setItem('attendance', JSON.stringify(attendanceRecords));
            localStorage.setItem('currentPractice', JSON.stringify(currentPractice));
            localStorage.setItem('gamePlans', JSON.stringify(gamePlans));
            localStorage.setItem('gameStats', JSON.stringify(gameStats));
            localStorage.setItem('scheduleEvents', JSON.stringify(scheduleEvents));
            localStorage.setItem('gameNotes', JSON.stringify(gameNotes));
            
            // Hide onboarding and initialize app
            document.getElementById('onboardingOverlay').classList.remove('active');
            initializeApp();
        }
        
        function initializeApp() {
            renderTeamSelector();
            renderDrills();
            renderPlayers();
            renderAttendanceHistory();
            updatePracticePlan();
            renderGamePlans();
            renderGameBreakdown();
            renderSchedule();
            renderGameNotes();
        }
        
        function renderTeamSelector() {
            const container = document.getElementById('teamSelectorContainer');
            container.innerHTML = '';
            
            Object.keys(teams).forEach((teamId, index) => {
                const team = teams[teamId];
                const btn = document.createElement('button');
                btn.className = 'team-selector' + (teamId === currentTeam ? ' active' : '');
                btn.id = `team-${teamId}`;
                btn.textContent = `${team.name} (${team.sport})`;
                btn.onclick = () => switchTeam(teamId);
                container.appendChild(btn);
            });
        }
        
        // Show onboarding if first time, otherwise initialize
        if (isFirstTime) {
            showOnboarding();
        } else {
            initializeApp();
        }
        
        function switchTeam(teamId) {
            currentTeam = teamId;
            localStorage.setItem('currentTeam', currentTeam);
            
            // Update team selector buttons
            document.querySelectorAll('.team-selector').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`team-${teamId}`).classList.add('active');
            
            // Update team names in all tabs
            const teamName = teams[teamId].name;
            document.getElementById('rosterTeamName').textContent = teamName;
            document.getElementById('drillsTeamName').textContent = teamName;
            document.getElementById('attendanceTeamName').textContent = teamName;
            document.getElementById('practiceTeamName').textContent = teamName;
            document.getElementById('gamePlanTeamName').textContent = teamName;
            document.getElementById('gameBreakdownTeamName').textContent = teamName;
            
            // Refresh all data displays
            renderDrills();
            renderPlayers();
            renderAttendanceHistory();
            updatePracticePlan();
            renderGamePlans();
            renderGameBreakdown();
            renderSchedule();
            renderGameNotes();
        }
        
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }
        
        function filterDrills() {
            renderDrills();
        }
        
        function renderDrills() {
            const container = document.getElementById('drillsList');
            const currentSport = teams[currentTeam].sport;
            const currentAge = teams[currentTeam].ageGroup;
            
            // Map age groups to drill age ranges
            const ageMap = {
                'U6': ['3-5', '3-8'],
                'U8': ['3-8', '5-8', '5-10'],
                'U10': ['5-8', '5-10', '8-10'],
                'U12': ['5-10', '8-10'],
                'U14': ['8-10', '5-10'],
                'U16': ['8-10', '5-10'],
                'U18': ['8-10', '5-10']
            };
            
            const relevantAgeRanges = ageMap[currentAge] || [];
            
            let filtered = drills.filter(d => {
                const sportMatch = d.sport === currentSport || d.sport === 'General';
                const ageMatch = relevantAgeRanges.some(range => d.ageRange.includes(range));
                return sportMatch && ageMatch;
            });
            
            if (filtered.length === 0) {
                container.innerHTML = '<p style="color: #999;">No drills available for this age group and sport yet. Check back soon!</p>';
                return;
            }
            
            container.innerHTML = filtered.map(drill => `
                <div class="drill-card" onclick="addToPractice(${drill.id})">
                    <div class="drill-title">
                        ${drill.fun ? 'üéâ ' : ''}${drill.title}
                    </div>
                    <div class="drill-meta">
                        <span class="badge">${drill.sport}</span>
                        <span class="badge age">Ages ${drill.ageRange}</span>
                        <span class="badge time">${drill.duration}</span>
                        <span class="badge">${drill.focus}</span>
                    </div>
                    <div class="drill-description">${drill.description}</div>
                    <div style="margin-top: 10px; color: #667eea; font-weight: 600;">
                        Click to add to practice plan ‚Üí
                    </div>
                </div>
            `).join('');
        }
        
        function addToPractice(drillId) {
            const drill = drills.find(d => d.id === drillId);
            if (!currentPractice[currentTeam].find(d => d.id === drillId)) {
                currentPractice[currentTeam].push(drill);
                localStorage.setItem('currentPractice', JSON.stringify(currentPractice));
                updatePracticePlan();
                alert(`‚úÖ "${drill.title}" added to practice plan!`);
            } else {
                alert(`This drill is already in your practice plan!`);
            }
        }
        
        function updatePracticePlan() {
            const container = document.getElementById('practicePlan');
            const teamPractice = currentPractice[currentTeam];
            
            if (teamPractice.length === 0) {
                container.innerHTML = '<p style="color: #999;">No drills added yet. Go to Practice Drills tab to add some!</p>';
                return;
            }
            
            const totalTime = teamPractice.reduce((sum, drill) => {
                const time = parseInt(drill.duration.split('-')[0]);
                return sum + time;
            }, 0);
            
            container.innerHTML = `
                <div class="card">
                    <h3>Practice Duration: ~${totalTime}-${totalTime + teamPractice.length * 5} minutes</h3>
                    <p style="margin-top: 10px; color: #666;">Your practice has ${teamPractice.length} activities</p>
                </div>
                ${teamPractice.map((drill, idx) => `
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
                            <div>
                                <h3>${idx + 1}. ${drill.title}</h3>
                                <p style="color: #666; margin-top: 5px;">${drill.duration} ‚Ä¢ ${drill.focus}</p>
                            </div>
                            <button class="btn" style="background: #e53e3e;" onclick="removeFromPractice(${idx})">Remove</button>
                        </div>
                    </div>
                `).join('')}
            `;
        }
        
        function removeFromPractice(idx) {
            currentPractice[currentTeam].splice(idx, 1);
            localStorage.setItem('currentPractice', JSON.stringify(currentPractice));
            updatePracticePlan();
        }
        
        function savePractice() {
            if (currentPractice[currentTeam].length === 0) {
                alert('Add some drills first!');
                return;
            }
            alert('‚úÖ Practice plan saved!');
        }
        
        function clearPractice() {
            if (confirm('Clear entire practice plan?')) {
                currentPractice[currentTeam] = [];
                localStorage.setItem('currentPractice', JSON.stringify(currentPractice));
                updatePracticePlan();
            }
        }
        
        function showAddPlayer() {
            document.getElementById('addPlayerModal').classList.add('active');
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        function addPlayer() {
            const name = document.getElementById('playerName').value;
            const age = document.getElementById('playerAge').value;
            
            if (!name || !age) {
                alert('Please fill in all fields!');
                return;
            }
            
            const player = {
                id: Date.now(),
                name: name,
                age: parseInt(age),
                practices: 0,
                skills: {
                    effort: 5,
                    teamwork: 5,
                    skill: 3,
                    improvement: 5
                }
            };
            
            players[currentTeam].push(player);
            localStorage.setItem('players', JSON.stringify(players));
            renderPlayers();
            closeModal('addPlayerModal');
            document.getElementById('playerName').value = '';
            document.getElementById('playerAge').value = '';
        }
        
        function renderPlayers() {
            const container = document.getElementById('playersList');
            const teamPlayers = players[currentTeam];
            
            if (teamPlayers.length === 0) {
                container.innerHTML = '<p style="color: #999;">No players yet. Add your first team member!</p>';
                return;
            }
            
            container.innerHTML = teamPlayers.map(player => {
                // Initialize skill attribute if it doesn't exist (for existing players)
                if (player.skills.skill === undefined) {
                    player.skills.skill = 3;
                }
                
                const effortStars = Array(5).fill(0).map((_, i) => 
                    `<span class="star ${i < player.skills.effort ? 'filled' : 'empty'}" onclick="updateSkill(${player.id}, 'effort', ${i + 1})">‚òÖ</span>`
                ).join('');
                
                const teamworkStars = Array(5).fill(0).map((_, i) => 
                    `<span class="star ${i < player.skills.teamwork ? 'filled' : 'empty'}" onclick="updateSkill(${player.id}, 'teamwork', ${i + 1})">‚òÖ</span>`
                ).join('');
                
                const skillStars = Array(5).fill(0).map((_, i) => 
                    `<span class="star ${i < player.skills.skill ? 'filled' : 'empty'}" onclick="updateSkill(${player.id}, 'skill', ${i + 1})">‚òÖ</span>`
                ).join('');
                
                const improvementStars = Array(5).fill(0).map((_, i) => 
                    `<span class="star ${i < player.skills.improvement ? 'filled' : 'empty'}" onclick="updateSkill(${player.id}, 'improvement', ${i + 1})">‚òÖ</span>`
                ).join('');
                
                return `
                    <div class="player-card">
                        <div class="player-name">${player.name}, ${player.age}</div>
                        <div class="stat-row">
                            <span>Practices:</span>
                            <span>${player.practices}</span>
                        </div>
                        <div class="stat-row">
                            <span>‚≠ê Effort:</span>
                            <div class="star-rating">${effortStars}</div>
                        </div>
                        <div class="stat-row">
                            <span>ü§ù Teamwork:</span>
                            <div class="star-rating">${teamworkStars}</div>
                        </div>
                        <div class="stat-row">
                            <span>üéØ Skill:</span>
                            <div class="star-rating">${skillStars}</div>
                        </div>
                        <div class="stat-row" style="border: none;">
                            <span>üìà Improving:</span>
                            <div class="star-rating">${improvementStars}</div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function updateSkill(playerId, skill, rating) {
            const player = players[currentTeam].find(p => p.id === playerId);
            player.skills[skill] = rating;
            localStorage.setItem('players', JSON.stringify(players));
            renderPlayers();
        }
        
        function updateProgress(playerId) {
            const player = players[currentTeam].find(p => p.id === playerId);
            const effort = prompt(`Rate ${player.name}'s Effort (1-5):`, player.skills.effort);
            const teamwork = prompt(`Rate ${player.name}'s Teamwork (1-5):`, player.skills.teamwork);
            const skill = prompt(`Rate ${player.name}'s Skill (1-5):`, player.skills.skill || 3);
            const improvement = prompt(`Rate ${player.name}'s Improvement (1-5):`, player.skills.improvement);
            
            if (effort && teamwork && skill && improvement) {
                player.skills.effort = Math.min(5, Math.max(1, parseInt(effort)));
                player.skills.teamwork = Math.min(5, Math.max(1, parseInt(teamwork)));
                player.skills.skill = Math.min(5, Math.max(1, parseInt(skill)));
                player.skills.improvement = Math.min(5, Math.max(1, parseInt(improvement)));
                
                localStorage.setItem('players', JSON.stringify(players));
                renderPlayers();
            }
        }
        
        function showAttendance() {
            const modal = document.getElementById('attendanceModal');
            const list = document.getElementById('attendanceList');
            const teamPlayers = players[currentTeam];
            
            if (teamPlayers.length === 0) {
                alert('Add players to your roster first!');
                return;
            }
            
            list.innerHTML = teamPlayers.map(player => `
                <div class="attendance-check">
                    <input type="checkbox" id="attend-${player.id}" checked>
                    <label for="attend-${player.id}">${player.name}</label>
                </div>
            `).join('');
            
            modal.classList.add('active');
        }
        
        function saveAttendance() {
            const date = new Date().toLocaleDateString();
            const teamPlayers = players[currentTeam];
            const present = teamPlayers.filter(player => 
                document.getElementById(`attend-${player.id}`).checked
            ).map(p => p.id);
            
            // Update practice count
            present.forEach(playerId => {
                const player = teamPlayers.find(p => p.id === playerId);
                player.practices++;
            });
            
            attendanceRecords[currentTeam].push({
                date: date,
                present: present,
                total: teamPlayers.length
            });
            
            localStorage.setItem('players', JSON.stringify(players));
            localStorage.setItem('attendance', JSON.stringify(attendanceRecords));
            
            renderPlayers();
            renderAttendanceHistory();
            closeModal('attendanceModal');
            alert('‚úÖ Attendance recorded!');
        }
        
        function renderAttendanceHistory() {
            const container = document.getElementById('attendanceHistory');
            const teamRecords = attendanceRecords[currentTeam];
            
            if (teamRecords.length === 0) {
                container.innerHTML = '<p style="color: #999; margin-top: 20px;">No attendance records yet.</p>';
                return;
            }
            
            container.innerHTML = '<h3 style="margin-top: 30px;">Recent Attendance</h3>' +
                teamRecords.slice(-10).reverse().map(record => `
                    <div class="card">
                        <div style="display: flex; justify-content: space-between;">
                            <span><strong>${record.date}</strong></span>
                            <span>${record.present.length}/${record.total} players</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${(record.present.length/record.total)*100}%"></div>
                        </div>
                    </div>
                `).join('');
        }
        
        // Schedule Functions
        function showAddScheduleEvent() {
            document.getElementById('scheduleEventModal').classList.add('active');
        }
        
        // Show/hide opponent field based on event type
        document.addEventListener('DOMContentLoaded', function() {
            const eventTypeSelect = document.getElementById('scheduleEventType');
            const opponentField = document.getElementById('scheduleEventOpponent');
            
            if (eventTypeSelect) {
                eventTypeSelect.addEventListener('change', function() {
                    if (this.value === 'game') {
                        opponentField.style.display = 'block';
                    } else {
                        opponentField.style.display = 'none';
                    }
                });
            }
        });
        
        function saveScheduleEvent() {
            const type = document.getElementById('scheduleEventType').value;
            const date = document.getElementById('scheduleEventDate').value;
            const time = document.getElementById('scheduleEventTime').value;
            const location = document.getElementById('scheduleEventLocation').value;
            const opponent = document.getElementById('scheduleEventOpponent').value;
            const notes = document.getElementById('scheduleEventNotes').value;
            
            if (!date || !time) {
                alert('Please fill in date and time!');
                return;
            }
            
            const event = {
                id: Date.now(),
                type: type,
                date: date,
                time: time,
                location: location,
                opponent: type === 'game' ? opponent : null,
                notes: notes
            };
            
            scheduleEvents[currentTeam].push(event);
            localStorage.setItem('scheduleEvents', JSON.stringify(scheduleEvents));
            renderSchedule();
            closeModal('scheduleEventModal');
            
            // Clear form
            document.getElementById('scheduleEventDate').value = '';
            document.getElementById('scheduleEventTime').value = '';
            document.getElementById('scheduleEventLocation').value = '';
            document.getElementById('scheduleEventOpponent').value = '';
            document.getElementById('scheduleEventNotes').value = '';
            
            alert('‚úÖ Event added to schedule!');
        }
        
        function renderSchedule() {
            const container = document.getElementById('scheduleList');
            const teamSchedule = scheduleEvents[currentTeam];
            
            if (teamSchedule.length === 0) {
                container.innerHTML = '<p style="color: #999; margin-top: 20px;">No scheduled events yet.</p>';
                return;
            }
            
            // Sort by date and time
            const sorted = teamSchedule.slice().sort((a, b) => {
                const dateA = new Date(a.date + ' ' + a.time);
                const dateB = new Date(b.date + ' ' + b.time);
                return dateA - dateB;
            });
            
            container.innerHTML = sorted.map(event => {
                const eventDate = new Date(event.date + ' ' + event.time);
                const isPast = eventDate < new Date();
                const typeColor = event.type === 'game' ? '#667eea' : '#48bb78';
                const typeLabel = event.type === 'game' ? 'GAME' : 'PRACTICE';
                
                return `
                    <div class="card" style="${isPast ? 'opacity: 0.6;' : ''}">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; flex-wrap: wrap;">
                            <span style="background: ${typeColor}; color: white; padding: 5px 12px; border-radius: 20px; font-weight: bold; font-size: 0.85em;">
                                ${typeLabel}
                            </span>
                            <button class="btn" style="background: #e53e3e; padding: 6px 12px; margin: 0;" onclick="deleteScheduleEvent(${event.id})">Delete</button>
                        </div>
                        <p style="font-size: 1.1em; font-weight: 600; margin-bottom: 8px;">
                            ${new Date(event.date).toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' })} at ${event.time}
                        </p>
                        ${event.opponent ? `<p style="color: #666; margin-bottom: 5px;"><strong>vs ${event.opponent}</strong></p>` : ''}
                        ${event.location ? `<p style="color: #666; margin-bottom: 5px;">üìç ${event.location}</p>` : ''}
                        ${event.notes ? `<p style="color: #555; margin-top: 8px; font-style: italic;">${event.notes}</p>` : ''}
                    </div>
                `;
            }).join('');
        }
        
        function deleteScheduleEvent(eventId) {
            if (confirm('Delete this event from the schedule?')) {
                scheduleEvents[currentTeam] = scheduleEvents[currentTeam].filter(e => e.id !== eventId);
                localStorage.setItem('scheduleEvents', JSON.stringify(scheduleEvents));
                renderSchedule();
            }
        }
        
        // Game Plan Functions
        function showCreateGamePlan() {
            document.getElementById('gamePlanModal').classList.add('active');
        }
        
        function saveGamePlan() {
            const opponent = document.getElementById('gamePlanOpponent').value;
            const date = document.getElementById('gamePlanDate').value;
            const strategy = document.getElementById('gamePlanStrategy').value;
            const lineup = document.getElementById('gamePlanLineup').value;
            
            if (!opponent || !date) {
                alert('Please fill in opponent and date!');
                return;
            }
            
            const plan = {
                id: Date.now(),
                opponent: opponent,
                date: date,
                strategy: strategy,
                lineup: lineup
            };
            
            gamePlans[currentTeam].push(plan);
            localStorage.setItem('gamePlans', JSON.stringify(gamePlans));
            renderGamePlans();
            closeModal('gamePlanModal');
            
            // Clear form
            document.getElementById('gamePlanOpponent').value = '';
            document.getElementById('gamePlanDate').value = '';
            document.getElementById('gamePlanStrategy').value = '';
            document.getElementById('gamePlanLineup').value = '';
            
            alert('‚úÖ Game plan created!');
        }
        
        function renderGamePlans() {
            const container = document.getElementById('gamePlansList');
            const teamPlans = gamePlans[currentTeam];
            
            if (teamPlans.length === 0) {
                container.innerHTML = '<p style="color: #999; margin-top: 20px;">No game plans yet. Create your first one!</p>';
                return;
            }
            
            container.innerHTML = teamPlans.slice().reverse().map(plan => `
                <div class="card">
                    <h3 style="margin-bottom: 10px;">vs ${plan.opponent}</h3>
                    <p style="color: #666; margin-bottom: 10px;"><strong>Date:</strong> ${new Date(plan.date).toLocaleDateString()}</p>
                    ${plan.strategy ? `<p style="margin-bottom: 10px;"><strong>Strategy:</strong> ${plan.strategy}</p>` : ''}
                    ${plan.lineup ? `<p><strong>Lineup:</strong> ${plan.lineup}</p>` : ''}
                </div>
            `).join('');
        }
        
        // Game Stats Functions
        function showAddGameStats() {
            document.getElementById('gameStatsModal').classList.add('active');
        }
        
        function saveGameStats() {
            const opponent = document.getElementById('gameStatsOpponent').value;
            const date = document.getElementById('gameStatsDate').value;
            const ourScore = document.getElementById('gameStatsOurScore').value;
            const theirScore = document.getElementById('gameStatsTheirScore').value;
            const notes = document.getElementById('gameStatsNotes').value;
            
            if (!opponent || !date || !ourScore || !theirScore) {
                alert('Please fill in all required fields!');
                return;
            }
            
            const stats = {
                id: Date.now(),
                opponent: opponent,
                date: date,
                ourScore: parseInt(ourScore),
                theirScore: parseInt(theirScore),
                result: parseInt(ourScore) > parseInt(theirScore) ? 'W' : parseInt(ourScore) < parseInt(theirScore) ? 'L' : 'T',
                notes: notes
            };
            
            gameStats[currentTeam].push(stats);
            localStorage.setItem('gameStats', JSON.stringify(gameStats));
            renderGameBreakdown();
            closeModal('gameStatsModal');
            
            // Clear form
            document.getElementById('gameStatsOpponent').value = '';
            document.getElementById('gameStatsDate').value = '';
            document.getElementById('gameStatsOurScore').value = '';
            document.getElementById('gameStatsTheirScore').value = '';
            document.getElementById('gameStatsNotes').value = '';
            
            alert('‚úÖ Game stats recorded!');
        }
        
        function renderGameBreakdown() {
            const container = document.getElementById('gameBreakdownList');
            const teamStats = gameStats[currentTeam];
            
            if (teamStats.length === 0) {
                container.innerHTML = '<p style="color: #999; margin-top: 20px;">No game stats yet. Add your first game!</p>';
                return;
            }
            
            // Calculate season record
            const wins = teamStats.filter(g => g.result === 'W').length;
            const losses = teamStats.filter(g => g.result === 'L').length;
            const ties = teamStats.filter(g => g.result === 'T').length;
            
            container.innerHTML = `
                <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none;">
                    <h3>Season Record: ${wins}-${losses}${ties > 0 ? `-${ties}` : ''}</h3>
                    <p style="margin-top: 10px;">Wins: ${wins} | Losses: ${losses}${ties > 0 ? ` | Ties: ${ties}` : ''}</p>
                </div>
            ` + teamStats.slice().reverse().map(game => {
                const resultColor = game.result === 'W' ? '#48bb78' : game.result === 'L' ? '#e53e3e' : '#ed8936';
                const resultText = game.result === 'W' ? 'WIN' : game.result === 'L' ? 'LOSS' : 'TIE';
                
                return `
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; flex-wrap: wrap;">
                            <h3>vs ${game.opponent}</h3>
                            <span style="background: ${resultColor}; color: white; padding: 5px 15px; border-radius: 20px; font-weight: bold;">
                                ${resultText}
                            </span>
                        </div>
                        <p style="color: #666; margin-bottom: 10px;"><strong>Date:</strong> ${new Date(game.date).toLocaleDateString()}</p>
                        <p style="font-size: 1.2em; margin-bottom: 10px;"><strong>Score:</strong> ${game.ourScore} - ${game.theirScore}</p>
                        ${game.notes ? `<p style="color: #555;"><strong>Notes:</strong> ${game.notes}</p>` : ''}
                    </div>
                `;
            }).join('');
        }
        
        // Game Notes Functions
        function showAddGameNote() {
            document.getElementById('gameNoteModal').classList.add('active');
        }
        
        function saveGameNote() {
            const title = document.getElementById('gameNoteTitle').value;
            const date = document.getElementById('gameNoteDate').value;
            const content = document.getElementById('gameNoteContent').value;
            
            if (!title || !date || !content) {
                alert('Please fill in all fields!');
                return;
            }
            
            const note = {
                id: Date.now(),
                title: title,
                date: date,
                content: content
            };
            
            gameNotes[currentTeam].push(note);
            localStorage.setItem('gameNotes', JSON.stringify(gameNotes));
            renderGameNotes();
            closeModal('gameNoteModal');
            
            // Clear form
            document.getElementById('gameNoteTitle').value = '';
            document.getElementById('gameNoteDate').value = '';
            document.getElementById('gameNoteContent').value = '';
            
            alert('‚úÖ Game note saved!');
        }
        
        function renderGameNotes() {
            const container = document.getElementById('gameNotesList');
            const teamNotes = gameNotes[currentTeam];
            
            if (teamNotes.length === 0) {
                container.innerHTML = '<p style="color: #999; margin-top: 20px;">No game notes yet.</p>';
                return;
            }
            
            container.innerHTML = teamNotes.slice().reverse().map(note => `
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px;">
                        <div>
                            <h3 style="margin-bottom: 5px;">${note.title}</h3>
                            <p style="color: #666; font-size: 0.9em;">${new Date(note.date).toLocaleDateString()}</p>
                        </div>
                        <button class="btn" style="background: #e53e3e; padding: 6px 12px; margin: 0;" onclick="deleteGameNote(${note.id})">Delete</button>
                    </div>
                    <p style="color: #555; line-height: 1.6; white-space: pre-wrap;">${note.content}</p>
                </div>
            `).join('');
        }
        
        function deleteGameNote(noteId) {
            if (confirm('Delete this game note?')) {
                gameNotes[currentTeam] = gameNotes[currentTeam].filter(n => n.id !== noteId);
                localStorage.setItem('gameNotes', JSON.stringify(gameNotes));
                renderGameNotes();
            }
        }
    </script>
</body>
</html>
